[supervisord]
nodaemon=true
logfile=/dev/null
loglevel=info

[program:apache]
command=/usr/sbin/apache2ctl -D FOREGROUND
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:node_stats]
directory=/opt/stats
command=node express.js
command=sh -c "export PORT=$PORT_STATS; node express.js"
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:deno_trophy]
directory=/opt/trophy
; export PORT so the service binds to 3002; deno run flags are permissive
command=sh -c "export PORT=$PORT_TROPHY; deno run -A main.ts"
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
